{"version":3,"sources":["store/productsReducer.js","components/Cart.js","components/Count.js","components/Remove.js","components/Product.js","components/Filter.js","components/CartInfo.js","App.js","hooks/useProducts.js","asyncActions/products.js","store/index.js","index.js"],"names":["defaultState","products","isFetching","isFiltered","isFailure","LOAD_PRODUCTS","LOAD_PRODUCTS_FAILURE","ADD_TO_CART_PRODUCT","MINUS_PRODUCT","REMOVE_PRODUCT","REMOVE_ALL_PRODUCT","TOOGLE_FILTER_PRODUCTS","getLocalStorage","JSON","parse","localStorage","getItem","setLocalStorage","product","cart","name","inCart","setItem","stringify","loadProductsAction","payload","type","loadProductsFailureAction","Cart","makeActive","className","onClick","xmlns","version","id","x","y","viewBox","style","enableBackground","d","Count","count","minus","plus","Remove","removeItem","width","height","fill","Product","img","title","price","dispatch","useDispatch","addProduct","addProductAction","src","alt","removeProductAction","minusProductAction","active","Filter","productsCount","useSelector","state","productsReducer","CartInfo","App","dealers","filter","item","map","useMemo","reduce","acc","toFixed","useProducts","productsArr","productsPriceSum","useEffect","dealersFilter","length","join","fetch","then","response","json","catch","e","fetchProducts","image","rootReducer","combineReducers","action","inStorage","loadedArr","filteredProducts","productsInCart","productsAfterMinus","productsClear","store","createStore","applyMiddleware","thunk","window","app","start","props","root","document","getElementById","dealersArr","ReactDOM","render"],"mappings":"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","file":"static/js/main.12fe7436.chunk.js","sourcesContent":["// Состояние по умолчанию\r\nconst defaultState = {\r\n  products: [],\r\n  isFetching: true,\r\n  isFiltered: false,\r\n  isFailure: false,\r\n};\r\n\r\n// Типы action\r\nexport const LOAD_PRODUCTS = \"LOAD_PRODUCTS\";\r\nexport const LOAD_PRODUCTS_FAILURE = \"LOAD_PRODUCTS_FAILURE\";\r\nexport const ADD_TO_CART_PRODUCT = \"ADD_TO_CART_PRODUCT\";\r\nexport const MINUS_PRODUCT = \"MINUS_PRODUCT\";\r\nexport const REMOVE_PRODUCT = \"REMOVE_PRODUCT\";\r\nexport const REMOVE_ALL_PRODUCT = \"REMOVE_ALL_PRODUCT\";\r\nexport const TOOGLE_FILTER_PRODUCTS = \"FILTER_PRODUCTS\";\r\n\r\nfunction getLocalStorage() {\r\n  return JSON.parse(localStorage.getItem(\"cart\")) || {};\r\n}\r\n\r\nfunction setLocalStorage(product) {\r\n  let cart = getLocalStorage();\r\n  cart[product.name] = product.inCart;\r\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n}\r\n\r\n//Reduser\r\nexport const productsReducer = (state = defaultState, action = {}) => {\r\n  switch (action.type) {\r\n    // Добавление продуктов при начальной загрузке\r\n    case LOAD_PRODUCTS:\r\n      let inStorage = getLocalStorage();\r\n      let loadedArr = action.payload.map((item) => {\r\n        if (inStorage[item.name]) {\r\n          item.inCart = inStorage[item.name];\r\n        }\r\n        return item;\r\n      });\r\n      return {\r\n        ...state,\r\n        products: [...state.products, ...loadedArr],\r\n        isFetching: false,\r\n      };\r\n    // Ошибка загрузки продуктов\r\n    case LOAD_PRODUCTS_FAILURE:\r\n      return {\r\n        ...state,\r\n        isFetching: false,\r\n        isFailure: true,\r\n      };\r\n    // Удаление продукта путём фильтрации\r\n    case REMOVE_PRODUCT:\r\n      let filteredProducts = state.products.map((item) => {\r\n        if (item.name === action.id) {\r\n          item.inCart = 0;\r\n          setLocalStorage({ name: item.name, inCart: item.inCart });\r\n        }\r\n        return item;\r\n      });\r\n      return {\r\n        ...state,\r\n        products: [...filteredProducts],\r\n      };\r\n    // Добавление в корзину продукта\r\n    case ADD_TO_CART_PRODUCT:\r\n      let productsInCart = state.products.map((item) => {\r\n        if (item.name === action.id) {\r\n          item.inCart = item.inCart >= 0 ? item.inCart + 1 : 1;\r\n          setLocalStorage({ name: item.name, inCart: item.inCart });\r\n        }\r\n\r\n        return item;\r\n      });\r\n      return {\r\n        ...state,\r\n        products: [...productsInCart],\r\n      };\r\n    // Удаление продукта из корзины\r\n    case MINUS_PRODUCT:\r\n      let productsAfterMinus = state.products.map((item) => {\r\n        if (item.name === action.id) {\r\n          item.inCart = item.inCart > 0 ? item.inCart - 1 : 0;\r\n          setLocalStorage({ name: item.name, inCart: item.inCart });\r\n        }\r\n\r\n        return item;\r\n      });\r\n      return {\r\n        ...state,\r\n        products: [...productsAfterMinus],\r\n      };\r\n    // Удаление продуктов из корзины\r\n    case REMOVE_ALL_PRODUCT:\r\n      let productsClear = state.products.map((item) => {\r\n        delete item.inCart;\r\n        localStorage.removeItem(\"cart\");\r\n        return item;\r\n      });\r\n      return {\r\n        ...state,\r\n        products: [...productsClear],\r\n      };\r\n    // Включение, выключение фильтрации\r\n    case TOOGLE_FILTER_PRODUCTS: {\r\n      return {\r\n        ...state,\r\n        isFiltered: !state.isFiltered,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// Actions\r\nexport const loadProductsAction = (payload) => ({\r\n  type: LOAD_PRODUCTS,\r\n  payload,\r\n});\r\nexport const loadProductsFailureAction = () => ({\r\n  type: LOAD_PRODUCTS_FAILURE,\r\n});\r\nexport const removeProductAction = (id) => ({ type: REMOVE_PRODUCT, id });\r\nexport const addProductAction = (id) => ({ type: ADD_TO_CART_PRODUCT, id });\r\nexport const minusProductAction = (id) => ({ type: MINUS_PRODUCT, id });\r\nexport const removeAllProductsAction = () => ({ type: REMOVE_ALL_PRODUCT });\r\nexport const toogleFilterProductsAction = () => ({\r\n  type: TOOGLE_FILTER_PRODUCTS,\r\n});\r\n","import React from \"react\";\r\n\r\nconst Cart = ({ makeActive }) => {\r\n  return (\r\n    <div className=\"cart--container\" onClick={makeActive}>\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        version=\"1.1\"\r\n        id=\"Layer_1\"\r\n        x=\"0px\"\r\n        y=\"0px\"\r\n        viewBox=\"0 0 122.9 107.5\"\r\n        style={{ enableBackground: \"new 0 0 122.9 107.5\" }}\r\n        className=\"cart\"\r\n      >\r\n        <g>\r\n          <path d=\"M3.9,7.9C1.8,7.9,0,6.1,0,3.9C0,1.8,1.8,0,3.9,0h10.2c0.1,0,0.3,0,0.4,0c3.6,0.1,6.8,0.8,9.5,2.5c3,1.9,5.2,4.8,6.4,9.1 c0,0.1,0,0.2,0.1,0.3l1,4H119c2.2,0,3.9,1.8,3.9,3.9c0,0.4-0.1,0.8-0.2,1.2l-10.2,41.1c-0.4,1.8-2,3-3.8,3v0H44.7 c1.4,5.2,2.8,8,4.7,9.3c2.3,1.5,6.3,1.6,13,1.5h0.1v0h45.2c2.2,0,3.9,1.8,3.9,3.9c0,2.2-1.8,3.9-3.9,3.9H62.5v0 c-8.3,0.1-13.4-0.1-17.5-2.8c-4.2-2.8-6.4-7.6-8.6-16.3l0,0L23,13.9c0-0.1,0-0.1-0.1-0.2c-0.6-2.2-1.6-3.7-3-4.5 c-1.4-0.9-3.3-1.3-5.5-1.3c-0.1,0-0.2,0-0.3,0H3.9L3.9,7.9z M96,88.3c5.3,0,9.6,4.3,9.6,9.6c0,5.3-4.3,9.6-9.6,9.6 c-5.3,0-9.6-4.3-9.6-9.6C86.4,92.6,90.7,88.3,96,88.3L96,88.3z M53.9,88.3c5.3,0,9.6,4.3,9.6,9.6c0,5.3-4.3,9.6-9.6,9.6 c-5.3,0-9.6-4.3-9.6-9.6C44.3,92.6,48.6,88.3,53.9,88.3L53.9,88.3z M33.7,23.7l8.9,33.5h63.1l8.3-33.5H33.7L33.7,23.7z\" />\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React from \"react\";\r\n\r\nconst Count = ({ count, minus, plus }) => {\r\n  return (\r\n    <div className=\"count--container\">\r\n      <div className=\"count count__minus\" onClick={minus}>\r\n        -\r\n      </div>\r\n      <div className=\"count\">{count}</div>\r\n      <div className=\"count count__plus\" onClick={plus}>\r\n        +\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Count;\r\n","import React from \"react\";\r\n\r\nconst Remove = ({ removeItem }) => {\r\n  return (\r\n    <div className=\"remove--container\" onClick={removeItem}>\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"24\"\r\n        height=\"24\"\r\n        viewBox=\"0 0 24 24\"\r\n        className=\"remove\"\r\n      >\r\n        <path\r\n          d=\"M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z\"\r\n          fill=\"red\"\r\n        />\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Remove;\r\n","import React from \"react\";\r\nimport Cart from \"./Cart\";\r\nimport Count from \"./Count\";\r\nimport Remove from \"./Remove\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  removeProductAction,\r\n  addProductAction,\r\n  minusProductAction,\r\n} from \"../store/productsReducer\";\r\n\r\nconst Product = ({ img, title, id, price, inCart = 0, isFiltered }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  // Удаление продукта\r\n  function removeProduct() {\r\n    dispatch(removeProductAction(id));\r\n  }\r\n\r\n  // Добавление поста\r\n  function addProduct() {\r\n    dispatch(addProductAction(id));\r\n  }\r\n\r\n  // Удаление продукта\r\n  function minusProduct() {\r\n    dispatch(minusProductAction(id));\r\n  }\r\n\r\n  return (\r\n    <div className=\"product\">\r\n      <div className=\"product__img--container\">\r\n        <img\r\n          className=\"product__img\"\r\n          src={\"https://murmuring-tor-81614.herokuapp.com/\" + img}\r\n          alt=\"\"\r\n        />\r\n      </div>\r\n      {isFiltered && <Remove removeItem={removeProduct} />}\r\n      <div className=\"product--description\">\r\n        <div className=\"product--left\">\r\n          <span className=\"title\">{title}</span>\r\n          <span className=\"price\">{price + \" $\"}</span>\r\n        </div>\r\n        {inCart ? (\r\n          <Count count={inCart} minus={minusProduct} plus={addProduct} />\r\n        ) : (\r\n          <Cart active={inCart} makeActive={addProduct} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","import React from \"react\";\r\nimport Cart from \"./Cart\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toogleFilterProductsAction } from \"../store/productsReducer\";\r\n\r\nconst Filter = ({ productsCount }) => {\r\n  const dispatch = useDispatch();\r\n  const isFiltered = useSelector((state) => state.productsReducer.isFiltered);\r\n\r\n  function filterProducts() {\r\n    dispatch(toogleFilterProductsAction());\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`filter ${productsCount ? \"active\" : \"\"} `}\r\n      data-product-count={productsCount}\r\n    >\r\n      <Cart active={isFiltered} makeActive={filterProducts} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Remove from \"./Remove\";\r\nimport { removeAllProductsAction } from \"../store/productsReducer\";\r\n\r\nconst CartInfo = ({ price }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  function removeProducts() {\r\n    dispatch(removeAllProductsAction());\r\n  }\r\n\r\n  return (\r\n    <div className=\"cart__info\">\r\n      <span className=\"cart__info-sum\">\r\n        {`Суммарная стоимость: ${price} $`}\r\n      </span>\r\n      <div className=\"cart__info-remove\">\r\n        Убрать все товары <Remove removeItem={removeProducts} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartInfo;\r\n","import React, { useEffect } from \"react\";\r\nimport \"./style.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useProducts } from \"./hooks/useProducts\";\r\nimport { fetchProducts } from \"./asyncActions/products\";\r\nimport Product from \"./components/Product\";\r\nimport Filter from \"./components/Filter\";\r\nimport CartInfo from \"./components/CartInfo\";\r\n\r\nconst App = ({ dealers }) => {\r\n  const products = useSelector((state) => state.productsReducer.products);\r\n  const isFetching = useSelector((state) => state.productsReducer.isFetching);\r\n  const isFiltered = useSelector((state) => state.productsReducer.isFiltered);\r\n  const isFailure = useSelector((state) => state.productsReducer.isFailure);\r\n  const [productsArr, productsCount, productsPriceSum] = useProducts(\r\n    products,\r\n    isFiltered\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  let product = (item) => (\r\n    <Product\r\n      img={item.image}\r\n      title={item.name}\r\n      key={item.name}\r\n      id={item.name}\r\n      price={item.price}\r\n      inCart={item.inCart}\r\n      isFiltered={isFiltered}\r\n    />\r\n  );\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchProducts(dealers));\r\n  }, []); // eslint-disable-line\r\n\r\n  if (isFetching) {\r\n    return <div className=\"loading\">Идёт загрузка...</div>;\r\n  } else if (isFailure) {\r\n    return (\r\n      <div className=\"loading\">Произошла ошибка при загрузке продуктов</div>\r\n    );\r\n  } else if (!products.length) {\r\n    return <div className=\"loading\">Продуктов нет</div>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Filter productsCount={productsCount} />\r\n      <div className=\"product--container\">\r\n        {isFiltered && <CartInfo price={productsPriceSum} />}\r\n        {productsArr.length\r\n          ? productsArr.map((item) => product(item))\r\n          : \"Продуктов нет\"}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { useMemo } from \"react\";\r\n\r\nexport function useProducts(products, isFiltered) {\r\n  let productsArr = isFiltered\r\n    ? products.filter((item) => item.inCart)\r\n    : products.map((item) => item);\r\n\r\n  let productsCount = useMemo(() => {\r\n    return products.reduce(\r\n      (acc, item) => (item.inCart ? (acc += item.inCart) : (acc += 0)),\r\n      0\r\n    );\r\n  }, [products]);\r\n\r\n  let productsPriceSum = useMemo(() => {\r\n    return products\r\n      .reduce(\r\n        (acc, item) =>\r\n          item.inCart ? (acc += item.inCart * item.price) : (acc += 0),\r\n        0\r\n      )\r\n      .toFixed(2);\r\n  }, [products]);\r\n  return [productsArr, productsCount, productsPriceSum];\r\n}\r\n","import {\r\n  loadProductsAction,\r\n  loadProductsFailureAction,\r\n} from \"../store/productsReducer\";\r\n\r\n// Получение постов\r\nexport const fetchProducts = (dealers = []) => {\r\n  let dealersFilter = dealers.length ? `?dealers=${dealers.join(\",\")}` : \"\";\r\n\r\n  return function (dispatch) {\r\n    fetch(\r\n      \"https://murmuring-tor-81614.herokuapp.com/api/goods/\" + dealersFilter\r\n    )\r\n      .then((response) => response.json())\r\n      .then((json) => dispatch(loadProductsAction(json)))\r\n      .catch((e) => {\r\n        dispatch(loadProductsFailureAction());\r\n      });\r\n  };\r\n};\r\n","import { createStore, applyMiddleware, combineReducers } from \"redux\";\r\nimport { productsReducer } from \"./productsReducer\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nconst rootReducer = combineReducers({\r\n  productsReducer,\r\n});\r\n\r\nexport const store = createStore(rootReducer, applyMiddleware(thunk));\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./store\";\r\n\r\nwindow.app = {\r\n  start(props = {}) {\r\n    const root = document.getElementById(\"root\");\r\n    const dealersArr = props.dealers ? props.dealers : [];\r\n\r\n    ReactDOM.render(\r\n      <Provider store={store}>\r\n        <App dealers={dealersArr} />\r\n      </Provider>,\r\n      root\r\n    );\r\n  },\r\n};\r\n"],"sourceRoot":""}